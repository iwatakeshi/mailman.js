(function(){Object.extender=function(l,j){var k;for(k in j){if(typeof j[k]==="object"){l[k]=l[k]||{};Object.extender(l[k],j[k])}else{l[k]=j[k]}}return l};function h(){this._done=[];this._fail=[]}h.prototype={execute:function(j,l){var k=j.length;l=Array.prototype.slice.call(l);while(k--){j[k].apply(null,l)}},resolve:function(){this.execute(this._done,arguments)},reject:function(){this.execute(this._fail,arguments)},done:function(j){this._done.push(j)},fail:function(j){this._fail.push(j)}};var i,f=(typeof module!=="undefined"&&module.exports),d="0.0.1",a="https://mandrillapp.com/api/1.0/",e={users:a+"users/",messages:a+"messages/",tags:a+"tags/",rejects:a+"rejects/",whitelists:a+"whitelists/",senders:a+"Senders/",urls:a+"urls/",templates:a+"templates/",webhooks:a+"webhooks/",subaccounts:a+"subaccounts/",inbound:a+"inbound/",exports:a+"exports/",ips:a+"ips/",metadata:a+"metadata/"},c={users:{info:{url:e.users+"info.json"},ping:{url:e.users+"ping.json"},ping2:{url:e.users+"ping2.json"},senders:{url:e.users+"senders.json"}},messages:{send:{url:e.messages+"send.json"},send_templates:{url:e.messages+"send-templates.json"},search:{url:e.messages+"search.json"},search_time_series:{url:e.messages+"search-time-series.json"},info:{url:e.messages+"info.json"},content:{url:e.messages+"content.json"},parse:{url:e.messages+"parse.json"},send_raw:{url:e.messages+"send-raw.json"},list_scheduled:{url:e.messages+"list-scheduled.json"},cancel_scheduled:{url:e.messages+"cancel-scheduled.json"},reschedule:{url:e.messages+"reschedule.json"}},tags:{list:{url:e.tags+"list.json"},"delete":{url:e.tags+"delete.json"},info:{url:e.tags+"info.json"},time_series:{url:e.tags+"time-series.json"},all_time_series:{url:e.tags+"all-time-series.json"}},reject:{add:{url:e.rejects+"add.json"},list:{url:e.rejects+"list.json"},"delete":{url:e.rejects+"delete.json"}},whitelists:{add:{url:e.whitelists+"add.json"},list:{url:e.whitelists+"list.json"},"delete":{url:e.whitelists+"delete.json"}},senders:{list:{url:e.senders+"list.json"},domains:{url:e.senders+"domains.json"},add_domain:{url:e.senders+"add-domain.json"},check_domain:{url:e.senders+"check-domain.json"},verify_domain:{url:e.senders+"verify-domain.json"},info:{url:e.senders+"info.json"},time_series:{url:e.senders+"time-series.json"}},urls:{list:{url:e.urls+"list.json"},search:{url:e.urls+"search.json"},time_series:{url:e.urls+"time-series.json"},tracking_domains:{url:e.urls+"tracking-domains.json"},add_tracking_domain:{url:e.urls+"add-tracking-domain.json"},check_tracking_domain:{url:e.urls+"check-tracking-domain.json"}},templates:{add:{url:e.templates+"add.json"},info:{url:e.templates+"info.json"},update:{url:e.templates+"update.json"},publish:{url:e.templates+"publish.json"},"delete":{url:e.templates+"delete.json"},list:{url:e.templates+"list.json"},time_series:{url:e.templates+"time-series.json"},render:{url:e.templates+"render.json"}},webhooks:{list:{url:e.webhooks+"list.json"},add:{url:e.webhooks+"add.json"},info:{url:e.webhooks+"info.json"},update:{url:e.webhooks+"update.json"},"delete":{url:e.webhooks+"delete.json"}},subaccounts:{list:{url:e.subaccounts+"list.json"},add:{url:e.subaccounts+"add.json"},info:{url:e.subaccounts+"info.json"},update:{url:e.subaccounts+"update.json"},"delete":{url:e.subaccounts+"delete.json"},pause:{url:e.subaccounts+"pause.json"},resume:{url:e.subaccounts+"resume.json"}},inbound:{domains:{url:e.inbound+"inbound.json"},add_domain:{url:e.inbound+"add-domain.json"},check_domain:{url:e.inbound+"check-domain.json"},delete_domain:{url:e.inbound+"delete-domain.json"},routes:{url:e.inbound+"routes.json"},add_route:{url:e.inbound+"add-route.json"},delete_route:{url:e.inbound+"delete-route.json"},send_raw:{url:e.inbound+"send-raw.json"}},exports:{info:{url:e.exports+"info.json"},list:{url:e.exports+"list.json"},rejects:{url:e.exports+"rejects.json"},whitelists:{url:e.exports+"whitelists.json"},activity:{url:e.exports+"activity.json"}},ips:{list:{url:e.ips+"list.json"},info:{url:e.ips+"info.json"},provision:{url:e.ips+"provision.json"},start_warmup:{url:e.ips+"start-warmup.json"},cancel_warmup:{url:e.ips+"cancel-warmup.json"},set_warmup:{url:e.ips+"set-warmup.json"},"delete":{url:e.ips+"delete.json"},list_pools:{url:e.ips+"list-pools.json"},pool_info:{url:e.ips+"pool-info.json"},create_pool:{url:e.ips+"create-pool.json"},delete_pool:{url:e.ips+"delete-pool.json"},check_custom_dns:{url:e.ips+"check-custom-dns.json"},set_custom_dns:{url:e.ips+"set-custom-dns.json"}},metadata:{list:{url:e.metadata+"list.json"},add:{url:e.metadata+"add.json"},update:{url:e.metadata+"update.json"},"delete":{url:e.metadata+"delete.json"}}},b={type:"POST",api:undefined,data:{key:""},debug:false};function g(l){b=Object.extender(b,l);i.debug(b,"Extended:");var j=c;function k(){if(!l||l.api===""){return undefined}var p,q=l.api.split(".");for(var n=0,m=q.length-1;n<m;n++){p=q[n];var o=j[p];if(o!==undefined){j=o}else{break}}i.debug(j[q[n]],"Selected API:");b.api=j[q[n]]}k();i.debug(b,"Configuration:")}i=function(j){if(i.isMailman(j)){j=j.value()}else{if(j===0||typeof j==="undefined"){j=0}}return new g(j)};i.version=d;i.isMailman=function(j){return j instanceof g};i.debug=function(k,j){if(b.debug===true){if(j){console.log(j)}console.log(k)}};i.fn=g.prototype={clone:function(){return i(this)},request:function(){if(!typeof $==="undefined"){i.debug(jQuery,"defined");var k=$.Deferred();i.debug(b.api,"type");$.ajax({type:b.type,url:b.api.url,data:b.data}).done(function(l){i.debug(l,"Response:");k.resolve(l)});return k.promise()}else{var j=require("superagent");var k=new h();j.post(b.api.url).send(b.data).end(function(l){if(l.ok){k.resolve(l);i.debug(JSON.stringify(l.body),"Response:")}else{i.debug(l.text,"Error reponse:")}});return k}}};if(f){module.exports=i}if(typeof ender==="undefined"){this.mailman=i}if(typeof define==="function"&&define.amd){define([],function(){return i})}}).call(this);
